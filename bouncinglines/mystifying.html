<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Mystifying</title>
    <style>
        body {
            background-color: #000;
        }

        #canvas1 {
            width: 700px;
            height: 400px;
            position: absolute;
            left: 50%;
            top: 50%;
            margin-left: -350px;
            margin-top: -200px;
            border: 4px solid #222;
        }
    </style>
    <script>
        var canvas, ctx, cwidth, cheight, polys = [], polycolors = [];
        var SPEED = 4,
            POLYS = 2,
            VERTS = 4,
            BLURSTEPS = 30;

        window.onload = function() {
            canvas = document.getElementById("canvas1");
            ctx = canvas.getContext("2d");
            cwidth = canvas.width;
            cheight = canvas.height;

            var pcolor, newpoly;
            for (var i = 0; i < POLYS; i++) {
                pcolor = rndColor();
                polys.push(createPolygon(VERTS));
                polycolors.push(pcolor);
                for (var j = 0; j < BLURSTEPS; j++) {
                    newpoly = copyPolygon(polys[polys.length-1]);
                    movePolygon(newpoly);
                    polys.push(newpoly);
                    polycolors.push(pcolor);
                }
            }

            setInterval(draw, 50);
        }

        function rndColor() {
            var hex = '0123456789ABCDEF'.split(''),
                    color = '#', i;
            for (i = 0; i < 6 ; i++) {
                color = color + hex[Math.floor(Math.random() * 16)];
            }
            return color;
        }


        function createPolygon(numVerts) {
            var res = [];
            var xx, yy, dxx, dyy, dir;
            for (var i = 0; i < numVerts; i++) {
                xx = Math.random()*cwidth;
                yy = Math.random()*cheight;
                dir = Math.random()*2*Math.PI;
                dxx = Math.cos(dir)*SPEED;
                dyy = Math.sin(dir)*SPEED;
                res.push({x: xx, y: yy, dx: dxx, dy: dyy});
            }
            return res;
        }


        function drawPolygon(canvas, poly, color) {
            ctx.strokeStyle = color;
            ctx.beginPath();
            ctx.moveTo(poly[0].x, poly[0].y);
            for (var v = 1; v < poly.length; v++) {
                var p = poly[v];
                ctx.lineTo(p.x, p.y);
            }
            ctx.closePath();
            ctx.stroke();
        }


        function movePolygon(poly) {
            for (var v=0; v < poly.length; v++) {
                var p = poly[v];
                p.x += p.dx;
                p.y += p.dy;

                if (p.x < 0 || p.x > cwidth) p.dx = -p.dx;
                if (p.y < 0 || p.y > cheight) p.dy = -p.dy;
            }
        }


        function copyPolygon(poly) {
            res = [];
            for (var v = 0; v < poly.length; v++) {
                var p = poly[v];
                res.push({x: p.x, y: p.y, dx: p.dx, dy: p.dy});
            }
            return res;
        }


        function draw() {
            ctx.clearRect(0, 0, cwidth, cheight);
            for (var i=0; i < polys.length; i++) {
                movePolygon(polys[i]);
                drawPolygon(ctx, polys[i], polycolors[i]);
            }
        }
    </script>
</head>
<body>
  <canvas id="canvas1" width="700" height="400"></canvas>
</body>
</html>